## 进程

进程是具有一定功能的程序关于某个数据集合上的一次运行活动，进程是系统进行资源调度和分配的一个独立单位。

### 进程的状态

就绪状态：进程已获得除处理机以外的所需资源，等待分配处理机资源
运行状态：占用处理机资源运行，处于此状态的进程数小于等于CPU数
阻塞状态： 进程等待某种条件，在条件满足之前无法执行 

### 进程通信和同步

进程通信和同步的目的：

* 数据传输：进程之间发送数据
* 共享数据：一个进程对数据的修改，另一个进程应该立刻看到；
* 通知时间：进程向另一个进程发送消息，通知发生了什么事件

进程通信的方式：
* 管道
* 命名管道 
* 信号
* 信号量 
* 共享内存
* 消息队列  
* 套接字 


### 调度算法

![][2]

* FCFS: 先来先服务算法
* 轮转：周期性间隔产生时钟中断，正在运行的进程被置于就绪队列；
* SPN: 最短进程优先，下一次选择所需处理时间最短的进程
* SRT: 最短剩余时间优先，总是选择预期剩余时间最短的进程
* HRRN: 最高响应比优先，R=(w+s)/s，其中R表示响应比，w表示已经等待的时间，s表示期待服务的时间
* 多级反馈：进程第一次进入系统是放置于RQ0,第一次被强占并返回就绪态时，放入RQ1，以后每次被强占就下降一级

![][1]

### 死锁

死锁，在两个或者多个并发进程中，如果每个进程持有某种资源而又等待其它进程释放它或它们现在保持着的资源，在未改变这种状态之前都不能向前推进，称这一组进程产生了死锁。通俗的讲就是两个或多个进程无限期的阻塞、相互等待的一种状态。

* 死锁产生的原因
	* 系统资源的竞争
	* 进程推进顺序非法

* 死锁产生的必要条件
	* 互斥条件：一个资源一次只能被一个进程使用
	* 请求与保持条件：一个进程因请求资源而阻塞时，对已获得资源保持不放
	* 不剥夺条件：进程获得的资源，在未完全使用完之前，不能强行剥夺
	* 循环等待条件：若干进程之间形成一种头尾相接的环形等待资源关系 

* 死锁处理策略
	
	1. 预防死锁：设置某些限制条件，破坏产生死锁的四个必要条件的一个或几个
	2. 避免死锁：资源的分配过程，用某种方法防止系统进入不安全状态，**银行家算法**
	3. 死锁的检测及解除：1）资源剥夺法；2）撤销进程法；3）进程回退法

问题：

1. 进程和线程的区别？
	* 进程是资源分配的基本单位，线程是cpu调度，或者说是程序执行的最小单位；
	* 进程有独立的地址空间，运行一个进程中的线程，它们之间共享大部分数据，使用相同的地址空间，因此启动一个线程，切换一个线　　　　　　程远比进程操作要快，花费也要小得多。
	* 线程之间的通信比较方便，统一进程下的线程共享数据（全局变量，静态变量）；
	* 线程不能独立执行，必须依附与程序之中，由应用程序提供多个线程的并发控制。

2. 进程的通信方式有哪些？

	主要分为：管道、系统IPC（包括消息队列、信号量、共享存储）、SOCKET

	管道主要分为：普通管道PIPE 、流管道（s_pipe）、命名管道（name_pipe）

	管道是一种半双工的通信方式，数据只能单项流动，并且只能在具有亲缘关系的进程间流动，进程的亲缘关系通常是父子进程
	命名管道也是半双工的通信方式，它允许无亲缘关系的进程间进行通信
	信号量是一个计数器，用来控制多个进程对资源的访问，它通常作为一种锁机制。
	消息队列是消息的链表，存放在内核中并由消息队列标识符标识。
	信号是一种比较复杂的通信方式，用于通知接收进程某个事件已经发生。
	共享内存就是映射一段能被其它进程访问的内存，这段共享内存由一个进程创建，但是多个进程可以访问。


[1]:process_dispatch.png
[2]:process_dispatch_example.png

---
【1】：[ 操作系统进程调度算法图解（FCFS、轮转、SPN、SRT、HRRN、反馈](http://blog.csdn.net/wanghao109/article/details/13004507)